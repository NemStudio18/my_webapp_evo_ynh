# Framework mode - Additional security and PHP rules

# Interdire certains fichiers sensibles
location ~* \.(json|tpl|ini|env)$ {
    deny all;
}

# Interdire l'accès aux fichiers et dossiers cachés, sauf .well-known
location ~ ^__PATH__/(.+/|)\.(?!well-known/) {
    deny all;
}

# Gestion PHP-FPM spécifique au mode framework
location ~ \.php$ {
    include snippets/fastcgi-php.conf;
    fastcgi_pass unix:/var/run/php/php__PHP_VERSION__-fpm-__APP__.sock;
    fastcgi_param SCRIPT_FILENAME $request_filename;
}

